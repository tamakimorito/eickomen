# エイコメン仕様書（概要）

## 1. アプリの目的
エイコメン（営業コメント自動生成アプリ）は、コールセンター業務において各商材（電気・ガス・インターネット・ウォーターサーバー等）の申込情報を一元的に入力し、**営業担当者が Chatwork 等に貼り付けて利用する “営業コメント” を正確かつ即時に自動生成すること**を目的とした支援アプリである。

従来の「担当者ごとに文言がブレる」「入力漏れが起きる」「商材別のロジックが複雑で統一されない」といった業務課題を解消し、

- 情報の標準化
- 脱属人化
- 二度手間防止
- 申込品質の均一化
- 事務処理ミスの削減

を実現することを主目的とする。

## 2. アプリが提供する価値
1. **全商材に共通する入力フォームを一元化**  
2. 商材ごとの営業コメントを**自動整形して生成**  
3. 商材ごとの複雑な分岐・条件をコード化し、**全員が同じ品質で案内できる**  
4. 「後確希望日」「後確希望時間」などの、後確に関する入力値を**所定のフォーマットで営業コメントに埋め込む**  
5. **誤案内・漏れ防止のアラート機能**  
6. **複数商材の情報をまとめて出力する統合コメント機能**  
7. 将来の追加商材・業務変更に対応できるよう、**ロジックを独立化・共通化**している  


## 3. 基本構造（高レベル）
エイコメンは以下の4階層で構成される。

### 3-1. UI層
- 入力フォーム   
- 商材ごとのタブ（電気 / ガス / ネット / WTS/代行）   
- 自動補完・非活性制御・必須制御  
- コピー用コメント欄  

### 3-2. ロジック層
- 営業コメント生成ロジック  
- 商材別の条件分岐ロジック  
- アラート・バリデーションロジック  
- コピー用に出力文字列を整形するロジック  
- 「後確希望日」「後確希望時間」等の値を、営業コメント内の所定の位置・形式で出力するロジック  

### 3-3. データ層
- 各商材のフィールドデータ（ヘッダと行のマッピング）  
- マスターデータ（プラン名等）   
- 入力内容 → コメント用文字列への変換  

### 3-4. メモリ層（AI開発専用）
- バージョン履歴（changelog.md）  
- 開発ルール（rules.md）  
- 仕様（spec.md）※本書  

## 5. 遵守すべき原則（Codex / AI Studio 用）
開発を行う際は以下のルールを絶対に守る。

### 5-1. キー名・ID の変更禁止
既存の変数名 / フィールド名 / キー名 / 配列構造を変更してはならない。

### 5-2. 副作用ゼロの原則
既存ロジックを壊す変更は禁止。  
新機能追加は原則 **既存に影響を与えない最小差分**とする。

### 5-3. 商材ロジックの破壊禁止
各商材の必須項目・アラート・出力形式・セット分岐は壊してはいけない。

### 5-4. 出力文言フォーマット統一
改修時は営業コメントの一貫性を維持する。

### 5-5. memory を更新すること
変更がある場合は必ず以下を更新、また、バージョンも更新（ヘッダなどに記載）する：

- memory/changelog.md
- memory/rules.md
- memory/spec.md（必要な場合のみ）

### 5-6. 季節テーマ（クリスマス）と復元メモ
- 現行テーマ：赤×緑を基調。ヘッダーは `bg-gradient-to-r from-emerald-800 via-green-700 to-red-700`、タブのアクティブ状態は `text-red-700 border-red-600`、非アクティブは `text-emerald-800 hover:text-red-600`。
- フォーム系：ラベルは赤系（`text-red-600`）、通常フォーカスは緑系（`focus:ring-emerald-500` / `border-emerald-300`）。
- セクション系：カード背景は `bg-emerald-50`、枠線は `border-emerald-200〜300`、見出しは `text-red-800` を基本とする。
- 復元用（旧配色メモ）：ヘッダー `bg-blue-700`、タブのアクティブ `text-blue-700 border-blue-700`、フォーカスリングは `focus:ring-blue-500`、カード背景は `bg-white`＋`border-gray-200`、見出しは `text-gray-700` 系を使用していた。

## 8. まとめ
エイコメンは **「複雑な商材ロジックを、誰でも正しく案内できるように標準化する“営業コメント生成アプリ”」**であり、  
この仕様書は codex や外部エンジニアが改修に入る際の**最上位レイヤーの理解文書**である。

詳細仕様（個別商材の条件・UIの挙動・営業コメントの詳細構造）は別ファイルで管理し、本書はアプリの根本思想・目的・構造を伝えることを目的とする。
