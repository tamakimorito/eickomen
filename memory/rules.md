# 開発ルール

このファイルは、本アプリケーション開発における永続的なルールと制約を記録します。AI開発者は、いかなる変更要求に対応する際も、まずこのファイルの内容を確認し、遵守する必要があります。

## 1. 変更の原則

- **【最重要】指示以外の変更は厳禁**: ユーザーから明確に指示された箇所以外のコードは、絶対に修正・削除・変更しないでください。リファクタリングや「良かれと思った」修正は、指示がない限り行わないでください。
- **機能の維持**: 既存の機能やロジックを、意図せず破壊したり、挙動を変えたりしないこと。変更は常に既存機能への影響を最小限に抑える形で行ってください。
- **一貫性の保持**: アプリケーション全体のデザイン、コンポーネント構造、状態管理（Context API, Reducer, Hooks）の一貫性を維持してください。

## 2. 開発プロセス

- **事前確認**: 変更に着手する前に、必ずこの`rules.md`と`changelog.md`を読み、過去の経緯とルールを把握してください。
- **メモリの更新**: 開発が完了したら、必ず以下のファイルを更新してください。
    - `changelog.md`: 行った変更内容を具体的かつ簡潔に追記します。
    - `rules.md`: ユーザーから新しいルールや制約が提示された場合に追記・更新します。
    - `tests.json`: 新機能の追加や重要な変更があった場合、動作確認用のテストケースを追記します。
- **最終更新日時の更新**: 開発完了後、`components/Header.tsx` 内の最終更新日時を現在の日付と時刻に更新してください。

## 3. 品質ガイドライン

- **UI/UX**: すべてのUIは美しく、直感的に操作できる必要があります。ユーザー体験を最優先してください。
- **コード品質**: コードはクリーンで、読みやすく、メンテナンスしやすい状態を保ってください。

## 4. 個別機能ルール

- **プラチナでんき（契約確認なし）**: 全販路共通で、「プラチナでんき」で「契約確認なし」を選択した場合、「性別」は必須項目となります。
- **名乗り引き継ぎの例外**: レコードIDが `ID:` で始まる案件に限り、電気/ガスタブからインターネットタブへ移動する際に「名乗り」フィールドは引き継がれず、空白になります。インターネットタブから電気/ガスタブへ戻る際は、元の値が復元されます。これは電気/ガス ⇔ インターネット間の移動にのみ適用される特殊ルールです。
