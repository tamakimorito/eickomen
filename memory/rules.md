# 開発ルール

このファイルは、本アプリケーション開発における永続的なルールと制約を記録します。AI開発者は、いかなる変更要求に対応する際も、まずこのファイルの内容を確認し、遵守する必要があります。

## 1. 変更の原則

- **【最重要】指示以外の変更は厳禁**: ユーザーから明確に指示された箇所以外のコードは、絶対に修正・削除・変更しないでください。リファクタリングや「良かれと思った」修正は、指示がない限り行わないでください。
- **機能の維持**: 既存の機能やロジックを、意図せず破壊したり、挙動を変えたりしないこと。変更は常に既存機能への影響を最小限に抑える形で行ってください。
- **一貫性の保持**: アプリケーション全体のデザイン、コンポーネント構造、状態管理（Context API, Reducer, Hooks）の一貫性を維持してください。

## 2. 開発プロセス

- **事前確認**: 変更に着手する前に、必ずこの`rules.md`と`changelog.md`を読み、過去の経緯とルールを把握してください。
- **メモリの更新**: 開発が完了したら、必ず以下のファイルを更新してください。
    - `changelog.md`: 行った変更内容を具体的かつ簡潔に追記します。
    - `rules.md`: ユーザーから新しいルールや制約が提示された場合に追記・更新します。
    - `tests.json`: 新機能の追加や重要な変更があった場合、動作確認用のテストケースを追記します。
- **バージョン表示の更新**: 開発完了後、`components/Header.tsx` 内の表示を、`changelog.md`の最新バージョン番号（例: `Version: v1.14.0`）に更新してください。

## 3. 品質ガイドライン

- **UI/UX**: すべてのUIは美しく、直感的に操作できる必要があります。ユーザー体験を最優先してください。
- **コード品質**: コードはクリーンで、読みやすく、メンテナンスしやすい状態を保ってください。

## 4. 個別機能ルール

- **プラチナでんき（契約確認なし）**: 全販路共通で、「プラチナでんき」で「契約確認なし」を選択した場合、「性別」は必須項目となります。
- **`ID:`レコードIDの名乗り自動入力**: 
    - レコードIDが `ID:` で始まる場合に「名乗り」が「すまえる」に自動設定される機能は、**電気・ガスタブでのみ**有効です。インターネットタブでは自動設定されません。
    - 電気・ガスタブで「すまえる」と自動設定された状態でインターネットタブに切り替えた場合、**名乗りは引き継がれず空欄になります。**
- **ウォーターサーバーの機種と色**: サーバー機種によって選択可能な色が定義されています。新しい機種や色を追加・変更する際は、`constants.ts`内の`WTS_SERVERS`と`WTS_COLORS`の両方の定義を更新する必要があります。